<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    //****async
    // 연산이 끝난 후 특정 코드 실행하고 싶을 때, Promise보다 가독성이 높은 async 사용
    // async 함수는 항상 Promise를 반환함
    // - 함수 실행 결과는 Promise Object로 감싸져 반환됨
    // - return 값 → Promise.resolve(값) (성공)
    // - throw Error 또는 Promise.reject() → Promise.reject(에러) (실패)
    // - 외부에서 .then() / .catch()로 성공·실패 처리 가능

    async function calculate(a, b) {
      if (a + b != parseInt(a + b)) {
        throw new Error("Please Enter numbers");
      } else {
        return a + b;
      }
    }

    calculate(4, "b")
      .then(function (result) {
        console.log("Success : ", result);
      })
      .catch(function (result) {
        console.log(result);
      });

    //****await
    //- async function안에 사용 가능
    //- then 대신 사용가능
    //- await은 promise rejected상태일 시 에러가 나서 멈춤(다음 줄로 안넘어가)
    // -따라서, try{} catch{} 구문으로 이를 방지

    async function add() {
      let promise = new Promise(function (resolve, reject) {
        let cal = 100 + 100;
        reject(cal);
      });

      //   promise.then(function (result) {
      //     console.log("Success : ", result);
      //   });
      try {
        //이걸 해보고
        let result = await promise; //기다려라
        console.log("After Await: ", result);
      } catch {
        //try 안되면 이거해
        console.log("After Await: Fail");
      }
    }

    add();
    //**async await 언제쓸까
    //여러 비동기 작업을 순차적으로 처리하거나,
    //동기,비동기 로직이 섞여 있는 흐름을 깔끔하게 제어하고 싶을 때
  </script>
</html>
